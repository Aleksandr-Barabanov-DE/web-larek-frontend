# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Базовый принцип

В проекте используется архитектурный принцип MVP (Model-View-Presenter), обеспечивающий четкое разделение ответственностей между компонентами:

Model отвечает за загрузку данных по API, сохранение и работу с данными, полученными от пользователя.

View отображает интерфейс для взаимодействия с пользователем, отслеживает события и уведомляет о них.

Presenter (в данном случае EventEmitter) связывает модель данных с интерфейсом, управляя их взаимодействием при возникновении событий.

## Краткое описание основных классов.

1. Базовые классы:

Класс Api:

Выполняет запросы к API серверу.
Методы get и post отправляют GET и POST запросы соответственно.
Метод handleResponse обрабатывает ответы от сервера.

Класс EventEmitter:

Реализует паттерн "Observer/Наблюдатель", обеспечивая работу событий.
Позволяет устанавливать и снимать слушателей событий, а также вызывать их при наступлении событий.
Методы:
оn - добавляет события;
off — убирает события;
emit — вызывает событие;
onAll — подписывает на все события;
ofAll — сбрасывает все обработчики событий;
trigger — создает заданное событие с заданными аргументами.

2. Компоненты Бизнес-логики. Классы Model:

Класс LarekApi:

Получает данные с сервера и передает их.
Наследует функциональность базового класса Api, который обеспечивает выполнение запросов к API серверу.
Метод getListProductCard получает список продуктов с сервера, обрабатывает каждую карточку продукта, добавляя к изображению базовый URL для загрузки изображений.
Метод postOrderLot отправляет заказ на сервер и возвращает результат заказа.

Класс BasketModel:

Управляет данными корзины товаров.
Методы:
getCounter - возвращает количество товаров в корзине.
getSumAll - считает и возвращает сумму синапсов всех товаров в корзине.
setSelectedСard - добавляет товар в корзину.
deleteCardFromBasket - удаляет товар из корзины.
clearBasket - очищает/удаляет все товары из корзины.

Класс ProductModel

Принимает и хранит данные о продуктах.
Метод setPreview устанавливает выбранную карточку продукта и отправляет событие 'modalCard:open', чтобы открыть модальное окно с информацией о продукте.

Класс FormModel

Хранит и обрабатывает данные, введенные пользователем.
Методы:
setOrderAddress - принимаем/сохраняет адрес пользователя.
validateOrder - проверяет адрес пользователя / и способ оплаты.
setOrderData - принимаем/сохраняет номер телефона/почту пользователя.
validateContacts - проверяет номер телефона/почту пользователя.
getOrderData - возвращает объект данных пользователя с выбранными товарами.

3. Компоненты Представления. Классы View:

Класс Modal

Управляет отображением модальных окон
Методы:
openModal - отображает модальное окон.
closeModal - закрывает модальное окно.

Класс Basket

Управляет отображением корзины товаров.
Методы класса Basket:
set items - Устанавливает элементы товаров в корзине. Если переданный массив не пустой, заменяет содержимое списка товаров элементами из массива и активирует кнопку для открытия модального окна заказа. В противном случае, делает кнопку неактивной и отображает сообщение о том, что корзина пуста.
renderHeaderBasketCounter - Отображает количество товаров в корзине в элементе счетчика корзины в шапке страницы.
renderSumAll - Отображает общую сумму стоимости всех товаров в корзине.
render() - Отображает заголовок корзины и возвращает элемент корзины для отображения на странице.

Класс BasketItem

Отображает отдельные элементы в корзине.
Методы класса BasketItem:
protected setPrice - Устанавливает цену товара вместе с единицами измерения "синапсы". Если цена равна null, возвращает "Бесценно".
Render - Отображает данные о товаре на элементе корзины, устанавливая индекс, заголовок и цену. Возвращает элемент корзины товара.

Класс Card

Управляет отображением карточек товаров на главной странице.
Методы класса Card:
setText - Задает текстовое содержимое элемента, принимая сам элемент (element) и значение (value). Возвращает текстовое значение.
set cardCategory - Задает категорию товара и соответствующий цветовой класс.
setPrice - Устанавливает цену товара вместе с единицами измерения "синапсы", возвращая строку с ценой. Если цена равна null, возвращает "Бесценно".
Render - Отображает данные о товаре на карточке, устанавливая категорию, заголовок, изображение, цену. Возвращает элемент карточки товара.

Класс CardPreview

управляет отображением карточек товаров в модальном окне.
Метод notSale проверяет наличие цены продукта в объекте data. Если цена присутствует, кнопка карточки остается активной, и метод возвращает строку 'Купить'. В случае отсутствия цены, метод делает кнопку неактивной, добавляя атрибут disabled, и возвращает строку 'Не продается'.

Метод render принимает объект data, содержащий информацию о продукте. Он устанавливает текстовое содержимое элементов карточки (категория, заголовок, изображение, цена, описание) на основе данных из объекта data. Текст кнопки карточки также зависит от наличия цены продукта. Наконец, метод возвращает элемент карточки для отображения на странице.

Класс Order
управляет отображение модального окна для ввода информации о адрессе доставки и способе оплаты заказа.
Метод paymentSelection - Принимает строку paymentMethod, представляющую выбранный метод оплаты. Устанавливает обводку вокруг выбранного метода оплаты, добавляя класс button_alt-active кнопке с соответствующим именем метода оплаты.
Метод render- возвращает элемент формы заказа для отображения на странице.

Класс Contacts управляет отображением модального окна для ввода информации о заказе и контактных данных.

Класс Success управляет отображением сообщения об успешном заказе в модальном окне.
Метод render -Возвращает элемент success, который содержит информацию о успешном заказе, подготовленный для отображения на странице.
